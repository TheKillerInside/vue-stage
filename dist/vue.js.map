{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/utils.js","../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/vdom/index.js","../src/vdom/patch.js","../src/observe/scheduler.js","../src/observe/watcher.js","../src/lifeCycle.js","../src/init.js","../src/render.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\nfunction genProps(attrs) {\n  // {key: value, key:value}\n  let str = \"\";\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === \"style\") {\n      let styles = {};\n      attr.value.replace(/([^;:]+):([^;:]+)/g, function () {\n        styles[arguments[1]] = arguments[2];\n      });\n      attr.value = styles;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\n\nfunction gen(el) {\n  if (el.type === 1) {\n    return generate(el); // 如果是元素，就递归生成\n  } else {\n    let text = el.text;\n    if (!defaultTagRE.test(text)) return `_v('${text}')`; // 普通文本\n    // 表达式，需要做一个表达式和普通值的拼接 ['aaa', _s(name), 'bbb'].join('+')\n    let lastIndex = (defaultTagRE.lastIndex = 0);\n    let tokens = [];\n    let match;\n    while ((match = defaultTagRE.exec(text))) {\n      // 如果正则 + g 配合exec就会有一个问题 lastIndex问题\n      let index = match.index;\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      tokens.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n    return `_v(${tokens.join(\"+\")})`; // webpack 源码 css-loader 图片处理\n  }\n}\n\nfunction genChildren(el) {\n  let children = el.children;\n  if (children) {\n    return children.map((item) => gen(item)).join(\",\");\n  }\n  return false;\n}\n\nexport function generate(ast) {\n  let children = genChildren(ast);\n  let code = `_c('${ast.tag}', ${\n    ast.attrs.length ? genProps(ast.attrs) : \"undefined\"\n  }${children ? `,${children}` : \"\"})`;\n  return code;\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\n// vue3的编译原理比vue2里好很多，没有这么多正则了\n\nexport function parserHTML(html) {\n  // 可以不停的截取模板，直到把模板全部解析完毕\n  let stack = [];\n  let root = null;\n\n  // 我要构建父子关系\n  function createASTElement(tag, attrs, parent = null) {\n    return {\n      tag,\n      type: 1, // 元素\n      children: [],\n      parent,\n      attrs\n    }\n  }\n\n  function start(tag, attrs) { // [div,p]\n    // 遇到开始标签 就取栈中的最后一个作为父节点\n    let parent = stack[stack.length - 1];\n    let element = createASTElement(tag, attrs, parent);\n    if (root == null) { // 说明当前节点就是根节点\n      root = element\n    }\n    if (parent) {\n      element.parent = parent; // 跟新p的parent属性 指向parent\n      parent.children.push(element);\n    }\n    stack.push(element)\n  }\n\n  function end(tagName) {\n    let endTag = stack.pop();\n    if (endTag.tag != tagName) {\n      console.log('标签出错')\n    }\n  }\n\n  function text(chars) {\n    let parent = stack[stack.length - 1];\n    chars = chars.replace(/\\s/g, \"\");\n    if (chars) {\n      parent.children.push({\n        type: 2,\n        text: chars\n      })\n    }\n  }\n\n  function advance(len) {\n    html = html.substring(len);\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen);  // 4.30 继续\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length);\n      let end;\n      let attr;\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) { // 1要有属性 2，不能为开始的结束标签 <div>\n        match.attrs.push({name: attr[1], value: attr[3] || attr[4] || attr[5]});\n        advance(attr[0].length);\n      } // <div id=\"app\" a=1 b=2 >\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false;\n  }\n\n  while (html) {\n    // 解析标签和文本\n    let index = html.indexOf('<');\n    if (index == 0) {\n      // 解析开始标签 并且把属性也解析出来  </div>\n      const startTagMatch = parseStartTag()\n      if (startTagMatch) { // 开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch;\n      if (endTagMatch = html.match(endTag)) { // 结束标签\n        end(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n    }\n    // 文本\n    if (index > 0) { // 文本\n      let chars = html.substring(0, index) //<div></div>\n      text(chars);\n      advance(chars.length)\n    }\n  }\n\n  return root;\n\n}\n\n\n//  <div id=\"app\">hello wolrd <span>hello</span></div> */}\n","import {generate} from \"./generate\";\nimport {parserHTML} from \"./parser\";\n\nexport function compileToFunction(template) {\n  // 1. 将模板变成ast语法树\n  let ast = parserHTML(template);\n  // 代码优化，标记静态节点(略过，不是重点)\n  // 2. 代码生成\n  let code = generate(ast); // 模板引擎的实现原理，都是new Function + with ejs jade handlerbar\n  let render = new Function(`with(this){return ${code}}`);\n  return render;\n\n//  1. 编译原理\n//  2. 响应式原理 依赖收集\n//  3. 组件化开发（贯穿了vue的流程）\n//  4. diff算法 \n}\n","export function isFunction(val) {\n  return typeof val === \"function\";\n}\n\nexport function isObject(val) {\n  return typeof val === \"object\" && val !== null;\n}\n\nlet callbacks = [];\nlet waiting = false;\n\nfunction flushCallbacks() {\n  callbacks.forEach(fn => fn()); // 按照顺序清空nextTick\n  callbacks = [];\n  waiting = false;\n}\n\nexport function nextTick(fn) { // vue3里面的nextTick就是promise，vue2里面做了一些兼容性处理\n  callbacks.push(fn);\n  if (!waiting) {\n    Promise.resolve().then(flushCallbacks);\n    waiting = true\n  }\n}\n\nlet strats = {}; // 存放所有策略\nlet lifeCycle = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n];\nlifeCycle.forEach(hook => {\n  strats[hook] = function (parentVal, childVal) {\n    if (childVal) {\n      if (parentVal) {\n        return parentVal.concat(childVal); // 父子都有值，用父和子拼接在一起，父有值就一定是数组\n      } else {\n        if (isArray(childVal)) {\n          return childVal;\n        }\n        return [childVal]; // 如果没有值，就会变成数组\n      }\n    } else {\n      return parentVal;\n    }\n  }\n})\n\nexport function mergeOptions(parentVal, childVal) {\n  const options = {};\n\n  for (let key in parentVal) {\n    mergeField(key);\n  }\n  for (let key in childVal) {\n    if (!parentVal.hasOwnProperty(key)) {\n      mergeField(key);\n    }\n  }\n\n  function mergeField(key) {\n    // 设计模式：策略模式\n    let strat = strats[key];\n    if (strat) {\n      options[key] = strat(parentVal[key], childVal[key]);\n    } else {\n      options[key] = childVal[key] || parentVal[key];\n    }\n  }\n\n  return options;\n}\n\nexport let isArray = Array.isArray\n","let oldArrayPrototype = Array.prototype; // 获取数组老的原型方法\n\nexport let arrayMethods = Object.create(oldArrayPrototype); // 让arrayMethods通过__proto__能获取到数组的方法\n\nlet methods = [\n  // 只有这7个方法导致数组发生变化\n  \"push\",\n  \"pop\",\n  \"shift\",\n  \"unshift\",\n  \"reverse\",\n  \"sort\",\n  \"splice\",\n];\n\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    // 数组新增的属性，要看一下是不是对象，如果是对象，继续进行劫持\n    // 需要调用数组原生逻辑\n    oldArrayPrototype[method].call(this, ...args);\n    // 可以添加自己的逻辑，函数劫持，切片\n    let inserted = null;\n    let ob = this.__ob__;\n    switch (method) {\n      case \"splice\": // 修改 删除 添加\n        inserted = args.slice(2); // splice 方法从第三个参数起，是增添的新数据\n        break;\n      case \"push\":\n      case \"unshift\":\n        inserted = args; // 调用push和unshift传递的参数就是新增的逻辑\n        break;\n    }\n    // 遍历数组inserted，看一下它是否需要进行二次劫持\n    if (inserted) ob.observeArray(inserted);\n    ob.dep.notify(); // 触发页面更新流程\n  };\n});\n\n// 属性的查找，是先找自己身上的，找不到去原型上查找\n","let id = 0;\n// dep.subs = [watcher];\n// watcher.deps = [dep];\nclass Dep {\n  constructor() { // 要把watcher放到dep中\n    this.subs = [];\n    this.id = id++;\n  }\n\n  depend() {\n    // 给watcher也加一个标识 防止重复\n    // this.subs.push(Dep.target); // 让dep记住这个watcher,watcher还要记住dep，相互关系\n    Dep.target.addDep(this); // 在watcher中调用dep的addSub方法\n  }\n\n  addSub(watcher) {\n    this.subs.push(watcher); // 让dep记住watcher\n  }\n\n  notify() {\n    this.subs.forEach(watcher => {\n      watcher.update();\n    })\n  }\n}\n\nDep.target = null; // 这里用了一个全局的变量 window.target 静态属性\n\nexport default Dep\n","import {isObject, isArray} from \"../utils\";\nimport {arrayMethods} from \"./array\";\nimport Dep from \"./dep\";\n\n// 1.每个对象都有一个__proto__属性，它指向所属类的原型 fn.__proto__ = Function.prototype\n// 2.每个原型上都有一个constructor属性，指向函数本身 Function.prototype.constructor = Function\n\nclass Observer {\n  constructor(value) {\n    // 不让__ob__被遍历到\n    // value.__ob__ = this; // 给对象和数组添加一个自定义属性\n    // 如果给一个对象增添一个不存在的属性，我希望也能添加一个自定义属性 {}.dep => watcher\n    this.dep = new Dep(); // 给对象和数组都增加dep属性 {} []\n    Object.defineProperty(value, \"__ob__\", {\n      value: this,\n      enumerable: false, // 不让__ob__被遍历到，不能被循环到\n    });\n\n    if (isArray(value)) {\n      // 更改数组原型方法，如果是数组，我就改写数组的原型链\n      value.__proto__ = arrayMethods;\n      this.observeArray(value);\n\n      // 数组 如何依赖收集，而且数组更新的时候，如何出发更新？\n    } else {\n      this.walk(value); // 核心就是循环对象\n    }\n  }\n\n  observeArray(data) {\n    // 递归遍历数组，对数组内部的对象再次重写 [{}] [[]]\n    data.forEach((item) => {\n      // 数组里面如果是引用类型那么是响应式的\n      // vm.arr[0].a = 100\n      // vm.arr[0] = 100 可以改属性，不可以改索引\n      observe(item);\n    });\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      // 要使用defineProperty重新定义\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\nfunction dependArray(value) { // 让数组里的引用类型都收集依赖\n  for (let i = 0; i < value.length; i++) {\n    let current = value[i];\n    current.__ob__ && current.__ob__.dep.depend();\n    if (Array.isArray(current)) {\n      dependArray(current);\n    }\n  }\n}\n\n// vue2应用了defineProperty需要一加载的时候，就进行递归操作，所以耗性能，如果层次过深也会浪费性能\n// 1. 性能优化的原则\n//  1）不要把所有的数据都放在data中，因为所有的数据都会增加get和set\n//  2）不要写数据的时候，层次过深，尽量扁平化数据\n//  3）不要频繁获取数据\n//  4）如果数据不需要响应式，可以使用Object.freeze冻结属性\nfunction defineReactive(obj, key, value) {\n  let childOb = observe(value); // 递归进行观测数据，不管有多少层，我都进行defineProperty，childOB有值，那么就是数组或者对象\n\n  let dep = new Dep();  // 每个属性都增加了一个dep\n\n  // vue2慢的原因 主要在这个方法中\n  Object.defineProperty(obj, key, {\n    get() {\n      if (Dep.target) {\n        dep.depend()\n        if (childOb) { // 取属性的时候，会对对应的值（对象本身和数组）进行依赖收集\n          childOb.dep.depend(); // 让数组和对象也记住当前的watcher\n          if (Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n      }\n      return value; // 闭包，此value会向上层的value进行查找\n    },\n    // 一个属性可能对应多个watcher，数组也有更新\n    set(newValue) {\n      // 如果设置的是一个对象，那么会再次进行劫持\n      if (newValue === value) return;\n      observe(newValue);\n      value = newValue;\n      dep.notify(); // 拿到当前的dep里面的watcher依次执行\n    },\n  });\n}\n\nexport function observe(value) {\n  // 1. 如果value不是对象，那么就不用观测了，说明写的有问题\n  if (!isObject(value)) {\n    return;\n  }\n\n  if (value.__ob__) {\n    return; // 一个对象不需要重复复观测\n  }\n\n  // 需要对对象进行观测（最外层必须是一个{} 不能是数组）\n\n  // 如果一个数据已经被观测过了，就不要再进行观测了，用类来实现，我观测过就增加一个标识，说明观测过了，在观测的时候，可以先检测是否观测过，如果观测过了就跳过检测\n  return new Observer(value);\n}\n","import { observe } from \"./observe\";\nimport { isFunction } from \"./utils\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n\n  if (opts.data) {\n    initData(vm);\n  }\n}\n\nfunction proxy(vm, key, source) { // 取值的时候做代理，不是暴力的把_data属性赋予给vm，而且直接复制会有命名冲突问题\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newValue) {\n      vm[source][key] = newValue;\n    },\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data; // 用户传入的数据\n\n  // 如果用户传递的是一个函数，则取函数的返回值作为对象，如果就是对象那就直接使用这个对象\n  // data和_data引用的是同一个人 => data被劫持了，vm._data也被劫持了\n  data = vm._data = isFunction(data) ? data.call(vm) : data; // _data 已经是响应式了\n\n  // 需要将data变成响应式的 Object.defineProperty，重写data中的所有属性\n  observe(data); // 观测数据\n\n  for (let key in data) {\n    // vm.message => vm._data.message\n    proxy(vm, key, \"_data\");  // 引用类型\n  }\n}\n","export function createElement(vm, tag, data = {}, ...children) { // 返回虚拟节点\n  return vnode(vm, tag, data, children, data.key, undefined)\n}\n\nexport function createText(vm, text) { // 返回虚拟节点\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\n\n// 看两个节点是否相同节点，就看是不是tag和key都一样\n// vue2就有一个性能问题，递归比对\nexport function isSameVnode(newVnode, oldVnode) {\n  return (newVnode.tag === oldVnode.tag) && (newVnode.key === oldVnode.key)\n}\n\nfunction vnode(vm, tag, data, children, key, text) {\n  return {\n    vm,\n    tag,\n    data,\n    children,\n    key,\n    text\n  }\n}\n\n// vnode其实就是一个对象，用来描述节点的，这个和ast长得很像？\n// ast描述语法，并没有用户自己的逻辑，只有语法解析出来的内容\n// vnode是描述dom结构，可以自己去扩展属性\n","import {isSameVnode} from \"./index\";\n\nexport function patch(oldVnode, vnode) {\n  const isRealElement = oldVnode.nodeType;\n\n  if (isRealElement) {\n    // 删除老节点，根据vnode创建新节点，替换掉老节点\n    const elm = createEle(vnode); // 根据虚拟节点创造了真实节点\n    const parentNode = oldVnode.parentNode;\n    parentNode.insertBefore(elm, oldVnode.nextSibling); // el.nextSibling 不存在就是null 如果为null insertBefore就是appendChild\n    parentNode.removeChild(oldVnode);\n    return elm; // 返回最新节点\n  } else { // 不管怎么diff最终想更新渲染 -> dom操作里去\n    // 只比较同级，如果不一样，儿子就不用比了，根据当前节点，创建儿子全部替换掉\n    // diff算法如何实现\n    if (!isSameVnode(oldVnode, vnode)) { // 如果新旧节点不是同一个，删除老的换成新的\n      return oldVnode.el.parentNode.replaceChild(createEle(vnode), oldVnode.el);\n    }\n\n    // 文本直接更新即可，因为文本没有儿子\n    let el = vnode.el = oldVnode.el; // 复用节点\n    if (!oldVnode.tag) { // 没有tag，是文本了，一个是文本，另一个也一定是文本\n      if (oldVnode.text !== vnode.text) {\n        return el.textContent = vnode.text\n      }\n    }\n\n    // 元素\n    updateProperties(vnode, oldVnode.data);\n\n    // 是相同节点了，复用节点，再更新不一样的地方(属性)）\n\n    // 比较儿子节点\n    let oldChildren = oldVnode.children || [];\n    let newChildren = vnode.children || [];\n    // 情况1：老的有儿子，新的没儿子\n    if (oldChildren.length > 0 && newChildren.length === 0) {\n      el.innerHTML = '';\n    } else if (newChildren.length > 0 && oldChildren.length === 0) { // 新的有儿子，老的没儿子，直接插入即可\n      newChildren.forEach(child => el.appendChild(createEle(child)));\n    } else { // 新老都有儿子\n      updateChildren(el, oldChildren, newChildren);\n    }\n  }\n}\n\nexport function createEle(vnode) {\n  let {tag, data, children, text, vm} = vnode;\n\n  // 我们让虚拟节点和真实节点做一个映射关系，后续某个虚拟节点更新，我可以跟踪到真实节点，并且更新真实节点\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    // 如果有data属性，需要把data设置到元素上\n    updateProperties(vnode, data);\n    children.forEach(child => {\n      vnode.el.appendChild(createEle(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\nfunction updateProperties(vnode, oldProps = {}) {\n  // 这里的逻辑，可能是初次渲染，初次渲染直接用oldProps给vnode的el赋值即可\n  // 更新逻辑，拿到老的props和vnode里面的data进行比对\n  let el = vnode.el; // dom真实的节点\n  let newProps = vnode.data || {};\n  // 新旧比对，两个对象如何比对差异？\n  let newStyle = newProps.style || {};\n  let oldStyle = oldProps.style || {};\n  for (let key in oldStyle) {\n    if (!newStyle[key]) { // 老的样式有，新的没有，就把页面上的样式删除\n      el.style[key] = '';\n    }\n  }\n  for (let key in newProps) { // 直接用新的盖掉老的就可以了\n    if (key === 'style') {\n      for (let key in newStyle) {\n        el.style[key] = newStyle[key];\n      }\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n  for (let key in oldProps) {\n    if (!newProps[key]) {\n      el.removeAttribute(key);\n    }\n  }\n}\n\nfunction updateChildren(el, oldChildren, newChildren) {\n  // vue中，如何做的diff算法\n  console.log(el, oldChildren, newChildren);\n  // vue内部做了优化(尽量提升性能，如果实在不行，再暴力比对)\n  // 1. 在列表中新增和删除的情况\n  let oldStartIndex = 0;\n  let oldStartVnode = oldChildren[0];\n  let oldEndIndex = oldChildren.length - 1;\n  let oldEndVnode = oldChildren[oldEndIndex];\n\n  let newStartIndex = 0;\n  let newStartVnode = newChildren[0];\n  let newEndIndex = newChildren.length - 1;\n  let newEndVnode = newChildren[newEndIndex];\n\n  function makeKeyByIndex(children) {\n    let map = {};\n    children.forEach((item, index) => {\n      map[item.key] = index;\n    })\n    return map;\n  }\n\n  let mapping = makeKeyByIndex(oldChildren)\n\n  // diff算法的复杂度，是O(n)。比对的时候，指针交叉的时候，就是比对完成了\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    if (!oldStartVnode) { // 在指针移动的时候 可能元素已经被移动走了，那就跳过这一项\n      oldStartVnode = oldChildren[++oldStartIndex];\n    } else if (!oldEndVnode) {\n      oldEndVnode = oldChildren[--oldEndIndex];\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) { // 头头比较\n      patch(oldStartVnode, newStartVnode); // 递归比较子节点，同时比对这两个人的差异\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) { // 尾尾比较\n      patch(oldEndVnode, newEndVnode); // 递归比较子节点，同时比对这两个人的差异\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) { // 头尾比较\n      patch(oldStartVnode, newEndVnode);\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling);\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) { // 尾头比较\n      patch(oldEndVnode, newStartVnode);\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el);\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    } else {\n      // 之前的逻辑都是考虑用户一些特殊情况，但是有非特殊的，乱序排\n      let moveIndex = mapping[newStartVnode.key];\n      if (moveIndex == undefined) {\n        // 没有直接将节点插入到开头的前面\n        el.insertBefore(createEle(newStartVnode), oldStartVnode.el);\n      } else {\n        // 有的话需要复用\n        let moveVnode = oldChildren[moveIndex]; // 找到复用的那个，将它移动到前面去\n        el.insertBefore(moveVnode.el, oldStartVnode.el);\n        patch(moveVnode, newStartVnode);\n        oldChildren[moveIndex] = undefined; // 将移动的节点标记为空\n      }\n      newStartVnode = newChildren[++newStartIndex];\n    }\n  }\n  if (newStartIndex <= newEndIndex) { // 新的多，那么就将多的插入进去即可\n    // 如果下一个是null就是appendChild\n    let anchor = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el; // 参照物是固定的\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\n      // 看一下，当前尾结点的下一个元素是否存在，如果存在则是插入到下一个元素的前面\n      // 这里可能是向前追加，可能是向后追加\n      el.insertBefore(createEle(newChildren[i]), anchor)\n    }\n  }\n  if (oldStartIndex <= oldEndIndex) { // 老的多 需要清理掉，直接删除即可\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\n      let child = oldChildren[i]; // child可能是undefined，所以要跳过空节点\n      child && el.removeChild(child.el);\n    }\n  }\n}\n","import {nextTick} from \"../utils\";\n\nlet queue = []; // 这里存放要更新的watcher\nlet has = {}; // 用来存储已有的watcher的id\n\nlet pending = false;\n\nfunction flushSchedulerQueue() {\n  // beforeCreated\n  queue.forEach(watcher => watcher.run());\n  queue = [];\n  has = [];\n  pending = [];\n}\n\nexport function queueWatcher(watcher) {\n  // 一般情况下，写去重，可以采用这种方式，如果你不使用set的时候\n  let id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    queue.push(watcher);\n    if (!pending) { // 防抖：多次执行，只走一次\n      nextTick(flushSchedulerQueue);\n      pending = true;\n    }\n  }\n}\n","import Dep from \"./dep\";\nimport {queueWatcher} from \"./scheduler\";\n\nlet id = 0;\n\nclass Watcher { // 要把dep放到watcher中\n  constructor(vm, fn, cb, options) { // $watch()\n    this.vm = vm;\n    this.fn = fn;\n    this.cb = cb;\n    this.options = options\n    this.id = id++;\n    this.depsId = new Set();\n    this.deps = [];\n    this.getter = fn; // fn就是页面渲染逻辑\n    this.get(); // 表示上来后就做一次初始化\n  }\n\n  addDep(dep) {\n    let did = dep.id;\n    if (!this.depsId.has(did)) {\n      this.depsId.add(did);\n      this.deps.push(dep); // 做了保存id的功能，并且让watcher记住dep\n      dep.addSub(this);\n    }\n  }\n\n  get() {\n    Dep.target = this;  // Dep.target = watcher 利用js单线程，先赋值\n    this.getter();  // 页面渲染的逻辑 _update(_render()) vm.name / vm.age 再取值\n    Dep.target = null; // 渲染完毕后就将标识清空，只有在渲染的时候才会进行依赖收集\n  }\n\n  update() { // 每次更新都会同步调用update方法，我可以将更新的逻辑缓存起来，等会同步更新数据的逻辑执行完毕后依次调用(去重的逻辑)\n    queueWatcher(this);\n    // 可以做异步更新处理\n    // this.get(); // vue.nextTick [fn1 fn2 fn3]\n  }\n\n  run() {\n    this.get();\n  }\n}\n\nexport default Watcher\n","import {patch} from \"./vdom/patch\";\nimport Watcher from \"./observe/watcher\";\n\nexport function mountComponent(vm) {\n  // 初始化流程\n  let updateComponent = () => {\n    vm._update(vm._render()); // render() _c _v _s\n  }\n  // 每个组件都有一个watcher，我们把这个watcher称之为渲染watcher\n  callHook(vm, 'beforeCreate');\n  new Watcher(vm, updateComponent, () => {\n    console.log('后续增添狗仔函数 update')\n    callHook(vm, 'created');\n\n  }, true)\n  callHook(vm, 'mounted');\n  // updateComponent();\n}\n\nexport function lifeCycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    // 采用的是 先序深度遍历 创建节点(遇到节点就创造节点，递归创建)\n    const vm = this;\n    // 第一次渲染，是根据虚拟节点，生成真实节点，替换掉原来的节点\n    // 如果是第二次，生成一个新的虚拟节点，和老的虚拟节点进行对比\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\nexport function callHook(vm, hook) {\n  let handlers = vm.$options[hook];\n  handlers && handlers.forEach(item => {\n    item.call(vm); // 生命周期的this永远指向实例\n  })\n}\n","import {compileToFunction} from \"./compiler\";\nimport {initState} from \"./state\";\nimport {mountComponent} from \"./lifeCycle\";\nimport {mergeOptions, nextTick} from \"./utils\";\n\nexport function initMixin(Vue) {\n  // 后续组件化开发的时候，Vue.extend可以创造一个子组件，子组件可以继承Vue，子组件也可以调用_init方法\n  Vue.prototype._init = function (options) {\n    const vm = this;\n\n    // 把用户的选项放到vm上，这样在其他方法中都可以获取到options了\n    vm.$options = mergeOptions(vm.constructor.options, options); // 为了后续扩展的方法， 都可以获取$options\n\n    initState(vm);\n\n    // options中是用户传入的数据 el, data\n    if (vm.$options.el) {\n      // 要将数据挂载到页面上\n\n      // 现在数据已经被劫持了，数据变化需要更新视图 diff算法更新需要更新的部分\n      // vue -> template(写起来更符合直觉) -> jsx(灵活)\n      // vue3 template 写起来性能会更高一些 内部做了很多优化\n      // template -> ast语法树(用来描述语法的，描述语法本身) -> 描述成一个树结构 -> 将代码重组成js语法\n      // 模板编译原理(把template模板编译成render函数 -> 虚拟DOM -> diff 算法比对虚拟DOM)\n      // ast -> render返回 -> vnode -> 生成真实DOM\n      // 更新的时候再次调用render -> 新的vnode -> 新旧比对 -> 更新真实DOM\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const opts = vm.$options;\n    el = document.querySelector(el); // 获取真实的元素\n    vm.$el = el; // 页面真实元素\n\n    if (!opts.render) {\n      // 模板编译\n      let template = opts.template;\n      if (!template) {\n        template = el.outerHTML;\n      }\n      let render = compileToFunction(el.outerHTML);\n      opts.render = render;\n    }\n\n    // 这里已经获取到了 一个render函数，这个函数他的返回值 _c('div', {id: 'app'}, _c('span', undefined, 'hello'))\n\n    mountComponent(vm);\n\n    // console.log(opts.render);\n  };\n\n  Vue.prototype.$nextTick = nextTick\n}\n","import {isObject} from \"./utils\";\nimport {createElement, createText} from \"./vdom\";\n\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function () {  // createElement 创建元素型的节点\n    const vm = this;\n    return createElement(vm, ...arguments); // 描述虚拟节点是属于那个实例的\n  }\n  Vue.prototype._v = function (text) {  // 创建文本的虚拟的节点\n    const vm = this;\n    return createText(vm, text); // 描述虚拟节点是属于那个实例的\n  }\n  Vue.prototype._s = function (val) {  // JSON.stringify()\n    if (isObject(val)) {\n      return JSON.stringify(val);\n    } else {\n      return val;\n    }\n  }\n  Vue.prototype._render = function () {\n    const vm = this; // vm中所所有数据 vm.xxx -> vm._data.xxx\n    let {render} = vm.$options;\n    let vnode = render.call(vm);\n    return vnode\n  }\n}\n","import {mergeOptions} from \"../utils\";\n\nexport function initGlobalAPI(Vue) {\n  Vue.options = {}; // 全局属性，在每个组件初始化的时候，将这些属性放到每个组件上\n  Vue.mixin = function (options) {\n    this.options = mergeOptions(this.options, options);\n    return this;\n  }\n  Vue.conponent = function name(params) {\n\n  }\n  Vue.filter = function name(params) {\n\n  }\n  Vue.directive = function name(params) {\n\n  }\n}\n","import {initMixin} from \"./init\";\nimport {renderMixin} from \"./render\";\nimport {lifeCycleMixin} from \"./lifeCycle\";\nimport {initGlobalAPI} from \"./global-api\";\nimport {compileToFunction} from \"./compiler\";\nimport {createEle, patch} from \"./vdom/patch\";\n\n// vue要如何实现，原型模式，所有的功能都通过原型扩展的方式来添加\nfunction Vue(options) {\n  this._init(options); // 实现vue的初始化功能\n}\n\ninitMixin(Vue);\nrenderMixin(Vue);\nlifeCycleMixin(Vue);\ninitGlobalAPI(Vue);\n\n// 先生成一个虚拟节点\nlet vm1 = new Vue({\n  data() {\n    return {name: 'pangfeng'}\n  }\n});\nlet render1 = compileToFunction(`<div>\n  <li key=\"A\">A</li>\n  <li key=\"B\">B</li>\n  <li key=\"C\">C</li>\n  <li key=\"D\">D</li>\n</div>`);\nlet oldVnode = render1.call(vm1); // 第一次的虚拟节点\nlet el1 = createEle(oldVnode);\ndocument.body.appendChild(el1);\n\n// 再生成一个新的虚拟节点 patch\nlet vm2 = new Vue({\n  data() {\n    return {name: '黑白灰'}\n  }\n});\nlet render2 = compileToFunction(`<div>\n  <li key=\"F\">F</li>\n  <li key=\"B\">B</li>\n  <li key=\"A\">A</li>\n  <li key=\"E\">E</li>\n  <li key=\"P\">P</li>\n</div>`);\nlet newVnode = render2.call(vm2);\nsetTimeout(() => {\n  patch(oldVnode, newVnode); // 比对两个虚拟节点的差异，更新需要更新的地方\n}, 2000);\n\n//  导出Vue给别人使用\nexport default Vue;\n\n// 只有根组件的情况：每个属性都有一个dep\n// 1. vue里面用到了观察者模式，默认组件渲染的时候，会创建一个watcher(并且会渲染视图)\n// 2. 当渲染视图的时候，会取data中的数据，会走每个属性的get方法，就让这个属性的dep记录watcher\n// 3. 同时让watcher也记住dep(这个逻辑目前没有用到)，dep和watcher是多对多的关系，因为一个属性可能对应多个视图，一个视图赌赢多个数据\n// 4. 如果数据发生变化，会通知对应属性的dep，依次通知存放的watcher去更新\n"],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","styles","value","replace","arguments","JSON","stringify","slice","gen","el","type","generate","text","test","lastIndex","tokens","match","exec","index","push","trim","join","genChildren","children","map","item","ast","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","parent","start","element","end","tagName","pop","console","log","chars","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","compileToFunction","template","render","Function","isFunction","val","isObject","callbacks","waiting","flushCallbacks","forEach","fn","nextTick","Promise","resolve","then","strats","lifeCycle","hook","parentVal","childVal","concat","isArray","mergeOptions","options","key","mergeField","hasOwnProperty","strat","Array","oldArrayPrototype","prototype","arrayMethods","Object","create","methods","method","args","call","inserted","ob","__ob__","observeArray","dep","notify","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","update","Observer","defineProperty","enumerable","__proto__","walk","data","observe","keys","defineReactive","dependArray","current","obj","childOb","get","set","newValue","initState","vm","opts","$options","initData","proxy","source","_data","createElement","vnode","undefined","createText","isSameVnode","newVnode","oldVnode","patch","isRealElement","nodeType","elm","createEle","parentNode","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProperties","oldChildren","newChildren","innerHTML","child","appendChild","updateChildren","document","createTextNode","oldProps","newProps","newStyle","style","oldStyle","setAttribute","removeAttribute","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","makeKeyByIndex","mapping","moveIndex","moveVnode","anchor","queue","has","pending","flushSchedulerQueue","run","queueWatcher","Watcher","cb","depsId","Set","deps","getter","did","add","mountComponent","updateComponent","_update","_render","callHook","lifeCycleMixin","Vue","$el","handlers","initMixin","_init","$mount","querySelector","outerHTML","$nextTick","renderMixin","_c","_v","_s","initGlobalAPI","mixin","conponent","params","filter","directive","vm1","render1","el1","body","vm2","render2","setTimeout"],"mappings":"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"}